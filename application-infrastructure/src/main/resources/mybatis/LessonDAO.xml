<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lecture.infr.dao.LessonDAO">

    <select id="getLessonsByCondition" resultType="com.lecture.domain.entities.LessonDO">
        SELECT *
        FROM lesson
        <where>
            true
            <if test="query.campusId != null">
                and campus_id = #{query.campusId}
            </if>
            <if test="query.required != null">
                and required = #{query.required}
            </if>
            <if test="query.lessonName != null">
                and name LIKE CONCAT('%',#{query.lessonName},'%')
            </if>
            <if test="query.teacherName != null">
                and teacher_name LIKE CONCAT('%', #{query.teacherName}, '%')
            </if>
            <if test="query.collegeId != null">
                and college_id = #{query.collegeId}
            </if>
            <if test="query.majorId != null">
                and major_id = #{query.majorId}
            </if>
        </where>
    </select>
    <select id="getLessonIdByStudentId" resultType="java.lang.Integer">
        select l_id
        from student_lesson
        where stu_id = #{studentId}
    </select>

</mapper>